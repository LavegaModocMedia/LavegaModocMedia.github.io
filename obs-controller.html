<!DOCTYPE html>
<html>
<head>
    <title>OBS Zoom Controller</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; padding: 20px; }
        .control-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input { width: 100%; }
        button { padding: 10px; cursor: pointer; background: #444; color: white; border: none; width: 100%; }
    </style>
</head>
<body>
    <h3>Source Controller</h3>
    <div class="control-group">
        <label>Source Name</label>
        <input type="text" id="sourceName" value="Camera">
    </div>
    <div class="control-group">
        <label>Zoom (Scale)</label>
        <input type="range" id="zoom" min="1" max="5" step="0.1" value="1">
    </div>
    <button onclick="updateOBS()">Apply Changes</button>

    <script>
        const socket = new WebSocket('ws://localhost:4455');

        socket.onopen = () => console.log("Connected to OBS");

        function updateOBS() {
            const name = document.getElementById('sourceName').value;
            const scale = parseFloat(document.getElementById('zoom').value);

            const payload = {
                "op": 6,
                "d": {
                    "requestType": "SetSceneItemTransform",
                    "requestData": {
                        "sceneName": "Main Scene", // Change to your scene name
                        "sceneItemId": 1,         // We'll improve this with a lookup later
                        "sceneItemTransform": {
                            "scaleX": scale,
                            "scaleY": scale
                        }
                    }
                }
            };
            socket.send(JSON.stringify(payload));
        }
    </script>
</body>
</html>
